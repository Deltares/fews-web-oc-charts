<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Spectrum Demo</title>
  <style>
    body {
      background-color: rgb(44, 44, 44);
    }

    title {
      stroke: black;
    }

    #chart-container-1 {
      position: relative;
      display: inline-block;
      width: 400px;
      height: 400px;
    }

    #chart-container-2 {
      position: relative;
      display: inline-block;
      width: 400px;
      height: 400px;
    }

    #polar-dot {
      fill: #999999;
      stroke: white;
    }

    #polar-line {
      fill: none;
      stroke: white;
    }

    #cartesian-dot {
      fill: #999999;
      stroke: white;
    }

    #cartesian-line {
      fill: none;
      stroke: white;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/6.3.0/d3.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/d3-interpolate@3"></script>
  <script src="https://cdn.jsdelivr.net/npm/d3-scale-chromatic@3"></script>
  <link rel="stylesheet" href="../dist/wb-charts-dark.css">
</head>

<body>

  <div id="chart-container-1"></div>
  <div id="chart-container-2"></div>
  <div>
    <input id="slider" type="range" name="points" min="0" max="10">
  </div>
  <script src="..//dist/wb-charts.umd.js"></script>
  <script type="text/javascript">
    function randomSpectrum(a) {
      var spectrum = [];
      for (var i = 0; i < 50; i++) {
        spectrum.push({
          x: 50 + i * 100,
          y: a * d3.randomUniform()()
        });
      }
      return spectrum;
    }
    // set constants
    var container1 = document.getElementById("chart-container-1");
    var polarAxis = new wbCharts.PolarAxis(container1, null, null, {
      angular: {
        direction: -1, //wbCharts.ANTICLOCKWISE,
        intercept: Math.PI/2
      },
      innerRadius: 0,
    });
    var polarData = [
      [{ 
          x: [0, 0.5],
          y: [-20,-15],
          v: .1
        },
        { 
          x: [0, 0.5],
          y: [-15,-10],
          v: .2
        },
        { 
          x: [0, 0.5],
          y: [-10,-5],
          v: .2
        },
        { 
          x: [0, 0.5],
          y: [-5,5],
          v: .2
        },
        { 
          x: [0, 0.5],
          y: [0,5],
          v: .2
        },
        { 
          x: [0, 0.5],
          y: [0,10],
          v: .2
        },
        {
          x: [0, 0.5],
          y: [5,10],
          v: .4
        },
        {
          x: [0, 0.5],
          y: [10,15],
          v: .5
        },
        {
          x: [0, 0.5],
          y: [15, 20],
          v: .7
        },
        {
          x: [0, 0.5],
          y: [20, 25],
          v: .8
        },
        {
          x: [0, 0.5],
          y: [25, 30],
          v: 1
        },
        {
          x: [0, 0.5],
          y: [30, 35],
          v: 1
        },
        {
          x: [0, 0.5],
          y: [35, 40],
          v: 1
        },
        {
          x: [0, 0.5],
          y: [40, 45],
          v: 1
        },
        {
          x: [0, 0.5],
          y: [45, 50],
          v: .8
        },
        {
          x: [0, 0.5],
          y: [50, 55],
          v: .7
        },
        {
          x: [0, 0.5],
          y: [55, 60],
          v: .5
        },
        {
          x: [0, 0.5],
          y: [60, 65],
          v: .2
        },
        {
          x: [0, 0.5],
          y: [65, 70],
          v: .2
        },
        {
          x: [0, 0.5],
          y: [70, 75],
          v: .2
        },
        {
          x: [0, 0.5],
          y: [75,80],
          v: .2
        },
        {
          x: [0, 0.5],
          y: [80, 85],
          v: .2
        },
        {
          x: [0, 0.5],
          y: [85, 90],
          v: .2
        },
        {
          x: [0, 0.5],
          y: [90, 95],
          v: .2
        },

        { 
          x: [0.5, 1],
          y: [-15,-10],
          v: .1
        },
        { 
          x: [0.5, 1],
          y: [-10,-5],
          v: .1
        },
        { 
          x: [0.5, 1],
          y: [-5,5],
          v: .1
        },
        { 
          x: [0.5, 1],
          y: [0,5],
          v: .1
        },
        { 
          x: [0.5, 1],
          y: [0,10],
          v: .1
        },
        {
          x: [0.5, 1],
          y: [5,10],
          v: .3
        },
        {
          x: [0.5, 1],
          y: [10,15],
          v: .4
        },
        {
          x: [0.5, 1],
          y: [15, 20],
          v: .6
        },
        {
          x: [0.5, 1],
          y: [20, 25],
          v: .7
        },
        {
          x: [0.5, 1],
          y: [25, 30],
          v: .9
        },
        {
          x: [0.5, 1],
          y: [30, 35],
          v: .9
        },
        {
          x: [0.5, 1],
          y: [35, 40],
          v: .9
        },
        {
          x: [0.5, 1],
          y: [40, 45],
          v: .9
        },
        {
          x: [0.5, 1],
          y: [45, 50],
          v: .7
        },
        {
          x: [0.5, 1],
          y: [50, 55],
          v: .6
        },
        {
          x: [0.5, 1],
          y: [55, 60],
          v: .4
        },
        {
          x: [0.5, 1],
          y: [60, 65],
          v: .1
        },
        {
          x: [0.5, 1],
          y: [65, 70],
          v: .1
        },
        {
          x: [0.5, 1],
          y: [70, 75],
          v: .1
        },
        {
          x: [0.5, 1],
          y: [75,80],
          v: .1
        },
        {
          x: [0.5, 1],
          y: [80, 85],
          v: .1
        },
        {
          x: [0.5, 1],
          y: [85, 90],
          v: .1
        },
        {
          x: [0.5, 1],
          y: [90, 95],
          v: .1
        },

 
        { 
          x: [1, 1.5],
          y: [-10,-5],
          v: .1
        },
        { 
          x: [1, 1.5],
          y: [-5,5],
          v: .1
        },
        { 
          x: [1, 1.5],
          y: [0,5],
          v: .1
        },
        { 
          x: [1, 1.5],
          y: [0,10],
          v: .1
        },
        {
          x: [1, 1.5],
          y: [5,10],
          v: .2
        },
        {
          x: [1, 1.5],
          y: [10,15],
          v: .2
        },
        {
          x: [1, 1.5],
          y: [15, 20],
          v: .3
        },
        {
          x: [1, 1.5],
          y: [20, 25],
          v: .5
        },
        {
          x: [1, 1.5],
          y: [25, 30],
          v: .5
        },
        {
          x: [1, 1.5],
          y: [30, 35],
          v: .5
        },
        {
          x: [1, 1.5],
          y: [35, 40],
          v: .5
        },
        {
          x: [1, 1.5],
          y: [40, 45],
          v: .3
        },
        {
          x: [1, 1.5],
          y: [45, 50],
          v: .3
        },
        {
          x: [1, 1.5],
          y: [50, 55],
          v: .3
        },
        {
          x: [1, 1.5],
          y: [55, 60],
          v: .3
        },
        {
          x: [1, 1.5],
          y: [60, 65],
          v: .1
        },
        {
          x: [1, 1.5],
          y: [65, 70],
          v: .1
        },
        {
          x: [1, 1.5],
          y: [70, 75],
          v: .1
        },
        {
          x: [1, 1.5],
          y: [75,80],
          v: .1
        },
        {
          x: [1, 1.5],
          y: [80, 85],
          v: .1
        },
        {
          x: [1, 1.5],
          y: [85, 90],
          v: .1
        },
        {
          x: [1, 1.5],
          y: [90, 95],
          v: .1
        },    

        { 
          x: [1.5, 2],
          y: [-5,5],
          v: .1
        },
        { 
          x: [1.5, 2],
          y: [0,5],
          v: .1
        },
        { 
          x: [1.5, 2],
          y: [0,10],
          v: .1
        },
        {
          x: [1.5, 2],
          y: [5,10],
          v: .1
        },
        {
          x: [1.5, 2],
          y: [10,15],
          v: .1
        },
        {
          x: [1.5, 2],
          y: [15, 20],
          v: .2
        },
        {
          x: [1.5, 2],
          y: [20, 25],
          v: .3
        },
        {
          x: [1.5, 2],
          y: [25, 30],
          v: .3
        },
        {
          x: [1.5, 2],
          y: [30, 35],
          v: .3
        },
        {
          x: [1.5, 2],
          y: [35, 40],
          v: .3
        },
        {
          x: [1.5, 2],
          y: [40, 45],
          v: .2
        },
        {
          x: [1.5, 2],
          y: [45, 50],
          v: .2
        },
        {
          x: [1.5, 2],
          y: [50, 55],
          v: .2
        },
        {
          x: [1.5, 2],
          y: [55, 60],
          v: .2
        },
        {
          x: [1.5, 2],
          y: [60, 65],
          v: .1
        },
        {
          x: [1.5, 2],
          y: [65, 70],
          v: .1
        },
        {
          x: [1.5, 2],
          y: [70, 75],
          v: .1
        },
        {
          x: [1.5, 2],
          y: [75,80],
          v: .1
        },
        {
          x: [1.5, 2],
          y: [80, 85],
          v: .1
        },
        {
          x: [1.5, 2],
          y: [85, 90],
          v: .1
        },

        { 
          x: [2, 3],
          y: [0,10],
          v: .1
        },
        {
          x: [2, 3],
          y: [5,10],
          v: .1
        },
        {
          x: [2, 3],
          y: [10,15],
          v: .1
        },
        {
          x: [2, 3],
          y: [15, 20],
          v: .1
        },
        {
          x: [2, 3],
          y: [20, 25],
          v: .2
        },
        {
          x: [2, 3],
          y: [25, 30],
          v: .2
        },
        {
          x: [2, 3],
          y: [30, 35],
          v: .2
        },
        {
          x: [2, 3],
          y: [35, 40],
          v: .2
        },
        {
          x: [2, 3],
          y: [40, 45],
          v: .2
        },
        {
          x: [2, 3],
          y: [45, 50],
          v: .1
        },
        {
          x: [2, 3],
          y: [50, 55],
          v: .1
        },
        {
          x: [2, 3],
          y: [55, 60],
          v: .1
        },
        {
          x: [2, 3],
          y: [60, 65],
          v: .1
        },
        {
          x: [2, 3],
          y: [65, 70],
          v: .1
        },
        {
          x: [2, 3],
          y: [70, 75],
          v: .1
        },
        {
          x: [2, 3],
          y: [75,80],
          v: .1
        },

        { 
          x: [3, 4],
          y: [0,10],
          v: .1
        },
        {
          x: [3, 4],
          y: [5,10],
          v: .1
        },
        {
          x: [3, 4],
          y: [10,15],
          v: .1
        },
        {
          x: [3, 4],
          y: [15, 20],
          v: .1
        },
        {
          x: [3, 4],
          y: [20, 25],
          v: .1
        },
        {
          x: [3, 4],
          y: [25, 30],
          v: .1
        },
        {
          x: [3, 4],
          y: [30, 35],
          v: .1
        },
        {
          x: [3, 4],
          y: [35, 40],
          v: .1
        },
        {
          x: [3, 4],
          y: [40, 45],
          v: .1
        },
        {
          x: [3, 4],
          y: [45, 50],
          v: .1
        },
        {
          x: [3, 4],
          y: [50, 55],
          v: .1
        },
        {
          x: [3, 4],
          y: [55, 60],
          v: .1
        },
        {
          x: [3, 4],
          y: [60, 65],
          v: .1
        },
        {
          x: [3, 4],
          y: [65, 70],
          v: .1
        },

        {
          x: [4, 5],
          y: [10,15],
          v: .1
        },
        {
          x: [4, 5],
          y: [15, 20],
          v: .1
        },
        {
          x: [4, 5],
          y: [20, 25],
          v: .1
        },
        {
          x: [4, 5],
          y: [25, 30],
          v: .1
        },
        {
          x: [4, 5],
          y: [30, 35],
          v: .1
        },
        {
          x: [4, 5],
          y: [35, 40],
          v: .1
        },
        {
          x: [4, 5],
          y: [40, 45],
          v: .1
        },
        {
          x: [4, 5],
          y: [45, 50],
          v: .1
        },
        {
          x: [4, 5],
          y: [50, 55],
          v: .1
        },
        {
          x: [4, 5],
          y: [55, 60],
          v: .1
        },

        {
          x: [5, 6],
          y: [30, 35],
          v: 0
        },


        {
          x: [0, 0.5],
          y: [185, 190],
          v: .1
        },
        {
          x: [0, 0.5],
          y: [190, 195],
          v: .5
        },
        {
          x: [0, 0.5],
          y: [195, 200],
          v: 1
        },
        {
          x: [0, 0.5],
          y: [200, 205],
          v: 1
        },
        {
          x: [0, 0.5],
          y: [205, 210],
          v: 1
        },
        {
          x: [0, 0.5],
          y: [210, 215],
          v: .5
        },
        {
          x: [0, 0.5],
          y: [215, 220],
          v: .1
        },
        {
        x: [0.5, 1],
          y: [185, 190],
          v: .1
        },
        {
          x: [0.5, 1],
          y: [190, 195],
          v: .1
        },
        {
          x: [0.5, 1],
          y: [195, 200],
          v: .5
        },
        {
          x: [0.5, 1],
          y: [200, 205],
          v: .5
        },
        {
          x: [0.5, 1],
          y: [205, 210],
          v: .5
        },
        {
          x: [0.5, 1],
          y: [210, 215],
          v: .5
        },
        {
          x: [0.5, 1],
          y: [215, 220],
          v: .1
        },

        {
          x: [1, 2],
          y: [195, 200],
          v: .1
        },
        {
          x: [1, 2],
          y: [200, 205],
          v: .1
        },
        {
          x: [1, 2],
          y: [205, 210],
          v: .1
        },
        {
          x: [1, 2],
          y: [210, 215],
          v: .1
        }
      ],
      [{
          x: [0.1, 0.2],
          y: [40, 45],
          v: 0.1
        },
        
        
        
        
        
        {
          x: [.1, .2],
          y: [15, 75],
          v: 0
        },
        {
          x: [.2, .3],
          y: [10, 85],
          v: 7.5
        },
        {
          x: [.3, .4],
          y: [10, 85],
          v: 8.5
        },
        {
          x: [.4, .5],
          y: [10, 85],
          v: 10
        },
        {
          x: [.5, .6],
          y: [15, 80],
          v: 10.5
        },
      ]
    ];
    var plot = new wbCharts.ChartRange(polarData[0], {
      colorScale: wbCharts.AUTO_SCALE
    });
    var random = [];
    for (var i = 0; i < 100; i++) {
      random.push({
        x: d3.randomUniform(0, 1)(),
        y: d3.randomUniform(0, 360)()
      });
    }

    var spectra = randomSpectrum(1);
    var plot4 = new wbCharts.ChartHistogram(spectra, {
      colorScale: wbCharts.AUTO_SCALE
    });
    plot.addTo(polarAxis, {
      radial: {
        key: "x",
        axisIndex: 0
      },
      angular: {
        key: "y",
        axisIndex: 0
      },
      color: {
        key: 'v'
      }
    });
    var container2 = document.getElementById("chart-container-2");
    var axis = new wbCharts.CartesianAxis(container2, null, null, {
      x: [{
        position: 'bottom',
        axisIndex: 0
      }],
      y: [{
        position: 'left',
        axisIndex: 0
      }]
    });

    plot4.addTo(axis, {
      x: {
        key: "x",
        axisIndex: 0
      },
      y: {
        key: "y",
        axisIndex: 0
      },
      color: {
        key: 'y'
      }
    }, 'histogram', '#cartesian-histogram');
    axis.redraw({
      x: {
        autoScale: true
      },
      y: {
        autoScale: true
      }
    })
    polarAxis.redraw()
    var count = 0;
    var updateCharts = function (event) {
      var newData = randomSpectrum(count + 1);
      plot4.data = newData;
      axis.redraw({
        y: {
          autoScale: true
        }
      });
      count++;
      plot.data = polarData[count % 2];
      polarAxis.redraw();
    };
    var input = document.getElementById("slider");
    input.onchange = function (event) {
      updateCharts(event);
    };

  </script>

</body>

</html>
