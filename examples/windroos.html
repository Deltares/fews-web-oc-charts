<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Wind Rose Tech Demo</title>
        <style>


            body {
                background-color : rgb(44,44,44);
            }

            title {
                stroke: black;
            }

            .axis-canvas {
                fill:rgb(89, 89, 89);
            }

            .r-axis{
              display: none;
            }

            .x-axis{
              display: none;
            }
            .x-grid{
              display: none;
            }

            #chart-container-1 {
                display: inline;
            }

            #chart-container-2 { display: inline; }

            #polar-dot {
                fill: greenyellow;
                stroke: white;
            }

            #polar-range {
                fill: #22222299;
                stroke: none;
            }

            #cartesian-range {
                fill:  #22222299;
                stroke: none;
            }

            #polar-line { fill: none; stroke: rgb(0, 128, 255); stroke-width: 3px; }

            #cartesian-dot { fill: #999999; stroke: white; }

            #wind-line { fill: none; stroke: rgb(0, 128, 255); stroke-width: 3px;}
            #stoot-line { fill: none; stroke: rgb(128, 0, 0); stroke-width: 3px;}

            [id^=wind-zoom-] {
                display: none
            }

            /* .tooltip { background: #eee;
            box-shadow: 0 0 5px #999999;
            color: #333;
            display: none;
            font-size: 12px;
            left: 130px;
            padding: 10px;
            position: absolute;
            text-align: center;
            top: 95px;
            width: 80px;
            z-index: 10; } */

            div.tooltip { position: absolute; text-align: center; min-width: 10px; height: 28px; padding: 2px; font: 12px sans-serif; background:
lightgray; border: 0px; border-radius: 8px; pointer-events: none; }

        </style>
        <script src="https://d3js.org/d3.v5.js"></script>
        <link rel="stylesheet" href="/dist/wb-charts.css">
    </head>
    <body>

        <div id="chart-container-1"></div>
        <div id="chart-container-2"></div>
        <div>
        <input id="slider" type="range" name="points" min="0" max="10">
        </div>
        <script src="/dist/wb-charts.umd.js"></script>
        <script type="text/javascript">
        function randomSpectrum(a) {
    var spectrum = [];
    for (var i = 0; i < 50; i++) {
        spectrum.push({ x: 50 + i * 100, y: a * d3.randomUniform()() });
    }
    return spectrum;
}
// set constants
var transitionTime = 200;
var height = 400;
var width = 400;
var container1 = document.getElementById("chart-container-1");
var polarAxis = new wbCharts.PolarAxis(container1, width, height, { direction: wbCharts.CLOCKWISE, intercept: 90, innerRadius: 20, angularRange: [0, 2 * Math.PI], radialScale: wbCharts.AUTO_SCALE });

var container2 = document.getElementById("chart-container-2");
var axis = new wbCharts.CartesianAxis(container2, 200, height, { yScale: wbCharts.AUTO_SCALE, transitionTime: transitionTime, yLabel: "windsnelheid [m/s]" });

var polarData = [
    [
        { x: 0, y: 45, v: 1 },
        { x: 1, y: 45, v: 1 },
    ],
    [
        { x: 0, y: 55, v: 1 },
        { x: 1, y: 55, v: 1 },
    ]
];


var rangeData = [
    [
      // { x: [0, .1] , y: [30, 50 ], v: 1 },
      { x: [0, 1] , y: [30, 50 ],v :1},
    ],
    [
        // { x: [0, .1] , y: [50, 65 ], v: 1 },
        { x: [0, 1] , y: [50, 65 ], v :0.5},
    ]
];

var rangeData2 = [
[
// { x: [0, .1] , y: [30, 50 ], v: 1 },
{ x: [0.01, 1] , y: [30, 45 ], v:1},
],
[
// { x: [0, .1] , y: [50, 65 ], v: 1 },
{ x: [0.01, 1] , y: [50, 65 ], v:0.5},
]
];

var windAmpl = [
[
{ x: 0, y: 40, v: 1 },
{ x: 1, y: 40, v: 1 },
],
[
{ x: 0, y: 55, v: 1 },
{ x: 1, y: 55, v: 1 },
]
];

var stoot = [
[
{ x: 0, y: 50, v: 1 },
{ x: 1, y: 50, v: 1 },
],
[
{ x: 0, y: 75, v: 1 },
{ x: 1, y: 75, v: 1 },
]
];

var plot = new wbCharts.ChartLine(polarData[0], {transitionTime: transitionTime});
var plot2 = new wbCharts.ChartRange(rangeData[0], {transitionTime: transitionTime});
var plot3 = new wbCharts.ChartRange(rangeData2[0], {transitionTime: transitionTime});
var plot4 = new wbCharts.ChartLine( [
{ x: 0, y: 0},
{ x: 0, y: 50},
], {});


var plot5 = new wbCharts.ChartLine( windAmpl[0], {transitionTime: transitionTime});
var plot5a = new wbCharts.ChartLine( stoot[0], {transitionTime: transitionTime});


plot3.addTo(axis,{ xkey: "x", ykey: "y"}, 'cartesian-range');
plot4.addTo(axis,{ xkey: "x", ykey: "y"},  'wind-zoom');
plot5.addTo(axis,{ xkey: "x", ykey: "y"}, 'wind-line');
plot5a.addTo(axis,{ xkey: "x", ykey: "y"}, 'stoot-line');


axis.redraw();
console.log("axis redraw")


plot2.addTo(polarAxis, { rkey: "x", tkey: "y" }, 'polar-range');
plot.addTo(polarAxis, { rkey: "x", tkey: "y"}, 'polar-line');
polarAxis.redraw();
console.log("polar redraw")


var count = 0;
var updateCharts = function (event) {
    count++;
    plot.data = polarData[count % 2];
    plot2.data = rangeData[count % 2];

    polarAxis.redraw();
    if ( count % 2 == 1) {
        plot4.data = [{x:0,y:0}, {x:0, y:100}] 
    } else {
        plot4.data = [{x:0,y:0}, {x:0, y:50}] 
    }
    plot3.data = rangeData2[count % 2];
    plot5.data = windAmpl[count % 2];
    plot5a.data = stoot[count % 2];
    axis.redraw();
};
var input = document.getElementById("slider");
input.onchange = function (event) { updateCharts(event); };


        </script>

    </body>
</html>
